(this["webpackJsonpnasa-media-search"]=this["webpackJsonpnasa-media-search"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var i,a=n(0),r=n.n(a),c=n(8),s=n.n(c),l=(n(50),n(51),n(92)),o=n(15),d=n(13),j=n(3),u=Object(a.createContext)({});!function(e){e.FETCH_ITEMS="FETCH_ITEMS",e.FETCH_ITEMS_FULFILLED="FETCH_ITEMS_FULFILLED",e.FETCH_ITEMS_REJECTED="FETCH_ITEMS_REJECTED",e.SELECT_ITEM="SELECT_ITEM"}(i||(i={}));var h={items:[],selectedItem:null,loading:!1,error:null},b=function(e,t){switch(console.log(t.type),t.type){case i.FETCH_ITEMS:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case i.FETCH_ITEMS_FULFILLED:return Object(d.a)(Object(d.a)({},e),{},{items:t.payload,loading:!1});case i.SELECT_ITEM:return Object(d.a)(Object(d.a)({},e),{},{selectedItem:t.payload});case i.FETCH_ITEMS_REJECTED:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload})}return e},f=function(e){var t=e.children,n=Object(a.useReducer)(b,h),i=Object(o.a)(n,2),r=i[0],c=i[1];return Object(j.jsx)(u.Provider,{value:{state:r,dispatch:c},children:t})},p=function(){return Object(j.jsx)("header",{style:{flex:1,height:"5rem"},children:Object(j.jsx)("h2",{children:"NASA Media Search"})})},m=n(94),x=n(91),v=function(){var e,t,n,r=Object(a.useState)({images:[],videos:[]}),c=Object(o.a)(r,2),s=c[0],l=c[1],d=Object(a.useContext)(u),h=d.state.selectedItem,b=d.dispatch;return Object(a.useEffect)((function(){h&&fetch("https://images-api.nasa.gov/asset/".concat(null===h||void 0===h?void 0:h.data[0].nasa_id)).then((function(e){return e.json()})).then((function(e){l({images:e.collection.items.filter((function(e){return e.href.endsWith(".jpg")})),videos:e.collection.items.filter((function(e){return e.href.endsWith(".mp4")}))})})).catch((function(e){alert("Error fetching media."),console.log(e)}))}),[h,b]),Object(j.jsxs)("div",{style:{width:"100%",maxWidth:"1200px",margin:"auto",display:"flex",flexWrap:"wrap"},children:[Object(j.jsx)("div",{children:Object(j.jsx)(m.a,{variant:"contained",color:"primary",startIcon:Object(j.jsx)(x.a,{}),style:{height:"fit-content"},onClick:function(){b({type:i.SELECT_ITEM,payload:null})},children:"Back to search"})}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"auto",minHeight:"50vh",width:"100%"},children:(null===s||void 0===s?void 0:s.videos.length)&&"video"===(null===h||void 0===h?void 0:h.data[0].media_type)?Object(j.jsx)("video",{autoPlay:!0,width:"90%",poster:null===s||void 0===s||null===(e=s.images[0])||void 0===e?void 0:e.href,controls:!0,children:Object(j.jsx)("source",{src:null===s||void 0===s||null===(t=s.videos[2])||void 0===t?void 0:t.href,type:"video/mp4"})}):Object(j.jsx)("img",{style:{maxWidth:"90%",minHeight:"100%"},src:null===s||void 0===s||null===(n=s.images[0])||void 0===n?void 0:n.href,alt:"nasa media"})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:null===h||void 0===h?void 0:h.data[0].title}),Object(j.jsxs)("b",{children:["Center: ",null===h||void 0===h?void 0:h.data[0].center]}),Object(j.jsxs)("b",{children:[" ","| Date: ",new Date(null===h||void 0===h?void 0:h.data[0].date_created).toString()]}),Object(j.jsx)("p",{children:null===h||void 0===h?void 0:h.data[0].description})]})]})},O=Object(l.a)({item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",overflowY:"hidden",width:"300px",height:"200px",border:"solid thin #333",borderRadius:"5px",margin:"5px 3px",background:"#eee","&:hover":{cursor:"pointer"}}}),g=function(e){var t=e.item,n=e.onClick,i=O();return Object(j.jsxs)("div",{onClick:n,className:i.item,children:[Object(j.jsx)("h4",{children:t.data[0].title}),Object(j.jsx)("img",{width:200,src:t.links[0].href,alt:"thumb"})]})},E=n(93);var y=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useContext)(u).dispatch;return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n&&function(e,t,n){n({type:t}),fetch(e).then((function(e){return e.json()})).then((function(e){n({type:t+"_FULFILLED",payload:e.collection.items.filter((function(e){return!!e.links}))})})).catch((function(e){n({type:t+"_REJECTED",payload:e})}))}("https://images-api.nasa.gov/search?q=".concat(n),i.FETCH_ITEMS,c)},style:{width:"100%",display:"flex",padding:"1rem 2rem"},children:[Object(j.jsx)(E.a,{label:"Search images and videos",onChange:function(e){var t=e.target;r(t.value)},style:{flex:1}}),Object(j.jsx)(m.a,{style:{height:"fit-content"},variant:"contained",color:"primary",children:"Search"})]})},C=Object(l.a)({"@keyframes spin":{from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(360deg)"}},spinner:{borderRadius:"50%",animation:"$spin 1s linear infinite"}}),T=function(e){var t=C();return Object(j.jsx)("div",{className:t.spinner,style:{border:"solid",borderWidth:e.borderWidth||".4rem",background:e.background||"#eee",borderColor:e.borderColor||"#00a grey grey grey",width:e.size||"2rem",height:e.size||"2rem"}})},I=Object(l.a)({itemList:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"center"}}),_=function(){var e=I(),t=Object(a.useState)("all"),n=Object(o.a)(t,2),c=n[0],s=n[1],l=Object(a.useContext)(u),d=l.state,h=d.items,b=d.loading,f=l.dispatch;return Object(j.jsxs)("div",{className:e.itemList,children:[Object(j.jsx)(y,{}),b?Object(j.jsx)(T,{}):Object(j.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[h.length>0?Object(j.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"start",padding:"1rem 5rem"},children:Object(j.jsxs)("select",{style:{height:"fit-content"},value:c,onChange:function(e){return s(e.target.value)},children:[Object(j.jsx)("option",{value:"all",children:"All"}),Object(j.jsx)("option",{value:"image",children:"Images"}),Object(j.jsx)("option",{value:"video",children:"Videos"})]})}):Object(j.jsx)("div",{style:{display:"flex",height:"40vh",alignItems:"center"},children:"Your search results will show here"}),("all"===c?h:h.filter((function(e){return e.data[0].media_type===c}))).map((function(e){return Object(j.jsx)(r.a.Fragment,{children:Object(j.jsx)(g,{onClick:function(){return f({type:i.SELECT_ITEM,payload:e})},item:e})},e.href)}))]})]})},S=Object(l.a)({main:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"90%",maxWidth:"1200px",margin:"auto"}}),F=function(){var e=Object(a.useContext)(u).state.selectedItem,t=S();return Object(j.jsxs)("div",{className:t.main,children:[Object(j.jsx)(p,{}),e?Object(j.jsx)(v,{}):Object(j.jsx)(_,{})]})};var w=function(){return Object(j.jsx)(f,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(F,{})})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),L()}},[[58,1,2]]]);
//# sourceMappingURL=main.34f5a919.chunk.js.map